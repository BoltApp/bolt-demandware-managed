!function(t){var n={};function e(I){if(n[I])return n[I].exports;var l=n[I]={i:I,l:!1,exports:{}};return t[I].call(l.exports,l,l.exports,e),l.l=!0,l.exports}e.m=t,e.c=n,e.d=function(t,n,I){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:I})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var I=Object.create(null);if(e.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var l in t)e.d(I,l,function(n){return t[n]}.bind(null,l));return I},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n$(document).ready(function () {\n  // repeat until Bolt button is created\n  var boltButtonExist = setInterval(function () {\n    var checkoutBoltButton = $('[data-tid=\"instant-bolt-checkout-button\"]'); // @ts-ignore\n\n    if (checkoutBoltButton && window.BoltCheckout && checkoutBoltButton.children()[0].nodeName === 'svg') {\n      // have to check if child of this dom is svg, otherwise bolt button is not fully rendered (it's the object)\n      clearInterval(boltButtonExist); // This is a temp hack to make sure default event handler that opens modal doesn't work since we open it here\n      // (line 74) We need to open it here instead of relying on default button event handler since user can close\n      // the modal, update cart and reopen it. The second time user opens the cart will use the previous\n      // Bolt order token since configure (line 73) is not guaranteed to run before modal opens\n\n      $('[data-tid=\"instant-bolt-checkout-button\"]').children().replaceWith($('[data-tid=\"instant-bolt-checkout-button\"]').children().clone());\n      var createBoltOrderUrl = $('.create-bolt-order-url').val(); // add an event handler to Bolt button's click\n\n      checkoutBoltButton.click(function () {\n        // call backend to create cart in Bolt\n        $.ajax({\n          url: createBoltOrderUrl,\n          method: 'GET',\n          success: function success(data) {\n            if (data !== null) {\n              // use the response from backend to configure Bolt connect\n              var cart = {\n                id: data.basketID\n              }; // @ts-ignore\n\n              var boltButtonApp = BoltCheckout.configure(cart, data.hints, null);\n              boltButtonApp.open();\n            }\n          }\n        });\n      });\n    }\n  }, 100);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9ib2x0X3YyX3NmcmEvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL2JvbHRNb2RhbENvbmZpZ3VyZS5qcz85OWZkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RTs7QUFFNUU7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpRUFBaUU7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgLy8gcmVwZWF0IHVudGlsIEJvbHQgYnV0dG9uIGlzIGNyZWF0ZWRcbiAgdmFyIGJvbHRCdXR0b25FeGlzdCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hlY2tvdXRCb2x0QnV0dG9uID0gJCgnW2RhdGEtdGlkPVwiaW5zdGFudC1ib2x0LWNoZWNrb3V0LWJ1dHRvblwiXScpOyAvLyBAdHMtaWdub3JlXG5cbiAgICBpZiAoY2hlY2tvdXRCb2x0QnV0dG9uICYmIHdpbmRvdy5Cb2x0Q2hlY2tvdXQgJiYgY2hlY2tvdXRCb2x0QnV0dG9uLmNoaWxkcmVuKClbMF0ubm9kZU5hbWUgPT09ICdzdmcnKSB7XG4gICAgICAvLyBoYXZlIHRvIGNoZWNrIGlmIGNoaWxkIG9mIHRoaXMgZG9tIGlzIHN2Zywgb3RoZXJ3aXNlIGJvbHQgYnV0dG9uIGlzIG5vdCBmdWxseSByZW5kZXJlZCAoaXQncyB0aGUgb2JqZWN0KVxuICAgICAgY2xlYXJJbnRlcnZhbChib2x0QnV0dG9uRXhpc3QpOyAvLyBUaGlzIGlzIGEgdGVtcCBoYWNrIHRvIG1ha2Ugc3VyZSBkZWZhdWx0IGV2ZW50IGhhbmRsZXIgdGhhdCBvcGVucyBtb2RhbCBkb2Vzbid0IHdvcmsgc2luY2Ugd2Ugb3BlbiBpdCBoZXJlXG4gICAgICAvLyAobGluZSA3NCkgV2UgbmVlZCB0byBvcGVuIGl0IGhlcmUgaW5zdGVhZCBvZiByZWx5aW5nIG9uIGRlZmF1bHQgYnV0dG9uIGV2ZW50IGhhbmRsZXIgc2luY2UgdXNlciBjYW4gY2xvc2VcbiAgICAgIC8vIHRoZSBtb2RhbCwgdXBkYXRlIGNhcnQgYW5kIHJlb3BlbiBpdC4gVGhlIHNlY29uZCB0aW1lIHVzZXIgb3BlbnMgdGhlIGNhcnQgd2lsbCB1c2UgdGhlIHByZXZpb3VzXG4gICAgICAvLyBCb2x0IG9yZGVyIHRva2VuIHNpbmNlIGNvbmZpZ3VyZSAobGluZSA3MykgaXMgbm90IGd1YXJhbnRlZWQgdG8gcnVuIGJlZm9yZSBtb2RhbCBvcGVuc1xuXG4gICAgICAkKCdbZGF0YS10aWQ9XCJpbnN0YW50LWJvbHQtY2hlY2tvdXQtYnV0dG9uXCJdJykuY2hpbGRyZW4oKS5yZXBsYWNlV2l0aCgkKCdbZGF0YS10aWQ9XCJpbnN0YW50LWJvbHQtY2hlY2tvdXQtYnV0dG9uXCJdJykuY2hpbGRyZW4oKS5jbG9uZSgpKTtcbiAgICAgIHZhciBjcmVhdGVCb2x0T3JkZXJVcmwgPSAkKCcuY3JlYXRlLWJvbHQtb3JkZXItdXJsJykudmFsKCk7IC8vIGFkZCBhbiBldmVudCBoYW5kbGVyIHRvIEJvbHQgYnV0dG9uJ3MgY2xpY2tcblxuICAgICAgY2hlY2tvdXRCb2x0QnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gY2FsbCBiYWNrZW5kIHRvIGNyZWF0ZSBjYXJ0IGluIEJvbHRcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6IGNyZWF0ZUJvbHRPcmRlclVybCxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgLy8gdXNlIHRoZSByZXNwb25zZSBmcm9tIGJhY2tlbmQgdG8gY29uZmlndXJlIEJvbHQgY29ubmVjdFxuICAgICAgICAgICAgICB2YXIgY2FydCA9IHtcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5iYXNrZXRJRFxuICAgICAgICAgICAgICB9OyAvLyBAdHMtaWdub3JlXG5cbiAgICAgICAgICAgICAgdmFyIGJvbHRCdXR0b25BcHAgPSBCb2x0Q2hlY2tvdXQuY29uZmlndXJlKGNhcnQsIGRhdGEuaGludHMsIG51bGwpO1xuICAgICAgICAgICAgICBib2x0QnV0dG9uQXBwLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCAxMDApO1xufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);